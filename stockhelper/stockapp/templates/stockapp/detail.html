{% extends "stockapp/index.html" %}
{% load static %}
{% load custom_tags %}

{% block title %}Details - {{ profile.companyName }}{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'stockapp/css/detail.css' %}">
{% endblock %}

{% block js %}
<!-- Safely output the history data as JSON so it can be processed by JS -->
{{ history|json_script:"history-data" }}
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script src="{% static 'stockapp/js/detail.js' %}"></script>
{% endblock %}

{% block content %}
<div class="main-info-container mt-3">
    <div class="company-container">
        <img class="logo" src="{{ profile.image }}" alt="{{ profile.companyName }} logo">
        <h1 class="symbol">{{ profile.symbol }}</h1>
        <h2 class="company-name">{{ profile.companyName }}</h2>
        <div class="price-container">
            <h3 class="current-price me-3">${{ profile.price|money }}</h3>
            <h4 class="change">{{ profile.changes }}</h4>
        </div>
    </div>
    <div class="logistics-container">
        <ul class="list-group">
            <li class="list-group-item"><strong>Beta:</strong> {{ profile.beta }}</li>
            <li class="list-group-item"><strong>Average Volume:</strong> {{ profile.volAvg|commas }}</li>
            <li class="list-group-item"><strong>Market Cap:</strong> {{ profile.mktCap|commas }}</li>
            <li class="list-group-item"><strong>Last Dividend Yield:</strong> {{ profile.lastDiv }}%</li>
            <li class="list-group-item"><strong>Range:</strong> {{ profile.range }}</li>
            <li class="list-group-item"><strong>Exchange:</strong> {{ profile.exchangeShortName }}</li>
            <li class="list-group-item"><strong>Industry:</strong> {{ profile.industry }}</li>
            <li class="list-group-item"><strong>Sector:</strong> {{ profile.sector }}</li>
            <li class="list-group-item"><strong>URL:</strong> <a href="{{ profile.website }}" target="_blank" rel="noopener noreferrer">{{ profile.website }}</a></li>
        </ul>
    </div>
</div>
<div class="chart-container">
    <div class="short-container">
        <div class="short-chart-container">
            <canvas id="short-chart"></canvas>
        </div>
        <div class="short-stats-container">
            <p class="short-predict fs-5"></p>
            <p class="short-mean"></p>
            <p class="short-var"></p>
            <p class="short-std"></p>
            <p class="short-err"></p>
            <p class="short-min"></p>
            <p class="short-max"></p>
            <p class="short-iqr"></p>
        </div>
    </div>
    <div class="long-container">
        <div class="long-chart-container">
            <canvas id="long-chart"></canvas>
        </div>
        <div class="long-stats-container">
            <p class="long-predict fs-5"></p>
            <p class="long-mean"></p>
            <p class="long-var"></p>
            <p class="long-std"></p>
            <p class="long-err"></p>
            <p class="long-min"></p>
            <p class="long-max"></p>
            <p class="long-iqr"></p>
        </div>
    </div>
</div>
<button type="button" class="add-portfolio-button btn-success">Add to Portfolio</button>
<hr>
<p class="description mx-3"><strong>About:</strong> {{ profile.description }}</p>
{% endblock %}
